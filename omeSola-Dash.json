[{"id":"337572f2.76802e","type":"tab","label":"Dailight Switch","disabled":false,"info":""},{"id":"33acc295.88bebe","type":"tab","label":"ICC-OmeSola","disabled":false,"info":"# Ome Sola Flow"},{"id":"da04bb9e.d326a8","type":"tab","label":"Load Notification","disabled":false,"info":""},{"id":"8edb00cf.573f4","type":"tab","label":"Daily Avg Graph","disabled":false,"info":""},{"id":"198d2e9b.8bf1d1","type":"tab","label":"Status Bar","disabled":false,"info":"# Status of ${inverterName}"},{"id":"f05f4cce.21f31","type":"subflow","name":"MovingAvg","info":"","category":"","in":[{"x":50,"y":30,"wires":[{"id":"93284a2f.12fee8"}]}],"out":[{"x":720,"y":400,"wires":[{"id":"8cd414e4.5deb58","port":0}]}],"env":[{"name":"time","type":"num","value":"10"}],"color":"#DDAA99"},{"id":"581e321b.a54a2c","type":"mqtt-broker","z":"","name":"icc-omesola","broker":"192.168.1.211","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"5abd0ebf.daf9c","type":"mqtt-broker","z":"","name":"","broker":"192.168.1.211","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"e860cbd5.9f8b98","type":"mqtt-broker","z":"","name":"ICC-MQTT-local","broker":"192.168.1.211","port":"1883","tls":"","clientid":"nr.dbld.work","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"72ab2781.7acc48","type":"mqtt-broker","z":"","name":"ICC-MQTT-zt","broker":"10.147.20.60","port":"1883","tls":"","clientid":"nr.dbld.work","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"875d6bfa.c373f8","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#a78e35","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#a78e35","edited":true},"page-titlebar-backgroundColor":{"value":"#a78e35","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#ccb35d","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#a78e35","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Ome Sola ICC Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ba439033.3668c","type":"ui_tab","z":"","name":"ICC-omeSola","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"9557616.a2012a","type":"ui_tab","name":"Tab 2","icon":"dashboard","order":2},{"id":"cad84a0a.717cb8","type":"ui_group","z":"","name":"Grid","tab":"ba439033.3668c","order":2,"disp":true,"width":"6","collapse":false},{"id":"b7881ffb.72655","type":"ui_group","z":"","name":"Load","tab":"ba439033.3668c","order":3,"disp":true,"width":"6","collapse":true},{"id":"bcae6984.3f5778","type":"ui_group","z":"","name":"PV","tab":"ba439033.3668c","order":4,"disp":true,"width":"6","collapse":true},{"id":"cd607b8c.beb018","type":"ui_group","z":"","name":"Battery","tab":"ba439033.3668c","order":5,"disp":true,"width":"6","collapse":true},{"id":"103d389.66ab4c7","type":"ui_group","name":"Group 1","tab":"9557616.a2012a","order":1,"disp":true,"width":6},{"id":"e76c6fdb.a4fb2","type":"ui_group","z":"","name":"Status","tab":"ba439033.3668c","order":1,"disp":true,"width":24,"collapse":true},{"id":"f93272e6.39d35","type":"ui_group","z":"","name":"Chart","tab":"ba439033.3668c","order":6,"disp":true,"width":"24","collapse":true},{"id":"a645dce4.4ffb7","type":"ui_spacer","name":"spacer","group":"e76c6fdb.a4fb2","order":13,"width":"0","height":"0"},{"id":"99ea9e31.5f43b","type":"mqtt in","z":"33acc295.88bebe","name":"ICC-MQTT","topic":"#","qos":"2","datatype":"auto","broker":"72ab2781.7acc48","x":80,"y":100,"wires":[["6505183e.855f48","42ce5158.6e97d"]]},{"id":"6505183e.855f48","type":"switch","z":"33acc295.88bebe","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"Inverter/GridWatts","vt":"str"},{"t":"eq","v":"Inverter/GridVoltage","vt":"str"},{"t":"eq","v":"Inverter/GridFreq","vt":"str"},{"t":"eq","v":"Inverter/LoadWatts","vt":"str"},{"t":"eq","v":"Inverter/InverterVolts","vt":"str"},{"t":"eq","v":"Inverter/InverterFreq","vt":"str"},{"t":"eq","v":"Inverter/LoadPercentage","vt":"str"},{"t":"eq","v":"Inverter/PvWattsTotal","vt":"str"},{"t":"eq","v":"Inverter/MPPT1_Volts","vt":"str"},{"t":"eq","v":"Inverter/MPPT1_Amps","vt":"str"},{"t":"eq","v":"Pylontech/Volts","vt":"str"},{"t":"eq","v":"Pylontech/SOC","vt":"str"},{"t":"eq","v":"Pylontech/Amps","vt":"str"},{"t":"eq","v":"Pylontech/Watts","vt":"str"},{"t":"eq","v":"Pylontech/Cycles","vt":"str"},{"t":"eq","v":"Pylontech/Temperature","vt":"str"}],"checkall":"true","repair":false,"outputs":16,"x":230,"y":160,"wires":[["ab57b574.aa03c8","12eee1de.53605e","7a3039b2.2c6f18","1c18d02b.4f39a"],["7d0dd208.a33f4c"],["3fceaabe.776166"],["17d8724b.b2a87e","c5b85ca8.ce711"],["5f301ac2.08a904"],["975d1f70.a96ce"],["6ef2a34d.d0932c","48fb1a9a.750cf4"],["6c2865a1.e3d14c","e091b39a.5eee"],["664fcf40.59cfc"],["ca6d5185.d6061"],["f41432b0.79e02"],["4d53b4e7.083dec"],["29b5e722.bac598"],["9ea4c7f4.e6a7c8","e4b5af27.67a19"],["10f5ec6.f18d614"],["fd52e694.89e8e8"]],"outputLabels":["1.GridWatts","","","2.LoadWatts","","","","3.PvWattsTotal","","","","","","4.BatteryWatts","",""]},{"id":"1c18d02b.4f39a","type":"debug","z":"33acc295.88bebe","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1470,"y":820,"wires":[]},{"id":"741f82a.395b87c","type":"join","z":"f05f4cce.21f31","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"${time}","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":430,"y":320,"wires":[["8cd414e4.5deb58"]]},{"id":"fa60cddf.a55d2","type":"change","z":"f05f4cce.21f31","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(msg.payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":220,"wires":[["741f82a.395b87c"]]},{"id":"8cd414e4.5deb58","type":"change","z":"f05f4cce.21f31","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$average(msg.payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":420,"wires":[[]]},{"id":"1f4230d4.ce62ef","type":"inject","z":"33acc295.88bebe","name":"setAllows","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":720,"wires":[["6a1f59f3.a848b8","f6a97b07.f1a7a8","675b7bf8.72d344"]]},{"id":"6a1f59f3.a848b8","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowLoad","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":170,"y":840,"wires":[[]]},{"id":"f6a97b07.f1a7a8","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowPV","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":900,"wires":[[]]},{"id":"675b7bf8.72d344","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowBattery","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":960,"wires":[[]]},{"id":"c5b85ca8.ce711","type":"switch","z":"33acc295.88bebe","name":"allowLoad","property":"allowLoad","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1040,"y":620,"wires":[["ba0c160b.4e4d78","12eee1de.53605e","1c18d02b.4f39a"]]},{"id":"7a3039b2.2c6f18","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowLoad","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":260,"wires":[[]]},{"id":"ba0c160b.4e4d78","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowPV","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1260,"y":320,"wires":[[]]},{"id":"97820caf.e5043","type":"change","z":"33acc295.88bebe","name":"","rules":[{"t":"set","p":"allowBattery","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1340,"y":420,"wires":[[]]},{"id":"e091b39a.5eee","type":"switch","z":"33acc295.88bebe","name":"allowPV","property":"allowPV","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1040,"y":700,"wires":[["97820caf.e5043","12eee1de.53605e","1c18d02b.4f39a"]]},{"id":"e4b5af27.67a19","type":"switch","z":"33acc295.88bebe","name":"allowBattery","property":"allowBattery","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":1050,"y":760,"wires":[["12eee1de.53605e","1c18d02b.4f39a"]]},{"id":"48fb1a9a.750cf4","type":"link out","z":"33acc295.88bebe","name":"","links":["4b66412.50446c"],"x":1395,"y":80,"wires":[]},{"id":"e1bced91.e79f5","type":"switch","z":"da04bb9e.d326a8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"79","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":160,"wires":[["61a34d9c.79b8d4"]]},{"id":"eda0f2db.9084d","type":"subflow:f05f4cce.21f31","z":"da04bb9e.d326a8","name":"","env":[],"x":190,"y":140,"wires":[["e1bced91.e79f5"]]},{"id":"4b66412.50446c","type":"link in","z":"da04bb9e.d326a8","name":"","links":["48fb1a9a.750cf4"],"x":55,"y":340,"wires":[["eda0f2db.9084d","4018708d.4a004"]]},{"id":"42ce5158.6e97d","type":"link out","z":"33acc295.88bebe","name":"","links":["15aa2621.7333da","f7c9ec3.fb0991"],"x":95,"y":520,"wires":[]},{"id":"112a08af.931377","type":"subflow:f05f4cce.21f31","z":"8edb00cf.573f4","name":"PV Watts","env":[{"name":"time","value":"30","type":"num"}],"x":600,"y":380,"wires":[["7840a9b2.670f68","4105e5e4.f8748c"]]},{"id":"9cf59cac.70e71","type":"subflow:f05f4cce.21f31","z":"8edb00cf.573f4","name":"GridWatts","env":[{"name":"time","value":"30","type":"num"}],"x":600,"y":160,"wires":[["dbd91f10.9f051","7ac12723.d8a128"]]},{"id":"896d919c.f8f59","type":"subflow:f05f4cce.21f31","z":"8edb00cf.573f4","name":"Load Watts","env":[{"name":"time","value":"30","type":"num"}],"x":610,"y":260,"wires":[["a11aefcc.11f5f","fc3bb221.d448e"]]},{"id":"dfdf1d94.ae557","type":"subflow:f05f4cce.21f31","z":"8edb00cf.573f4","name":"Battery Watts","env":[{"name":"time","value":"30","type":"num"}],"x":600,"y":520,"wires":[["2ffc0f4f.13151"]]},{"id":"44ab6a6.ebd8c94","type":"comment","z":"8edb00cf.573f4","name":"Grid Is RED","info":"","x":610,"y":200,"wires":[]},{"id":"59f56505.67528c","type":"comment","z":"8edb00cf.573f4","name":"Load Is Blue","info":"","x":610,"y":300,"wires":[]},{"id":"b170f9d9.ec9868","type":"comment","z":"8edb00cf.573f4","name":"PV Is GREEN","info":"","x":590,"y":420,"wires":[]},{"id":"f5b3bc3a.76f55","type":"comment","z":"8edb00cf.573f4","name":"Battery Is Purple","info":"","x":600,"y":560,"wires":[]},{"id":"a11aefcc.11f5f","type":"switch","z":"8edb00cf.573f4","name":"allowLoadAvg","property":"allowLoadAvg","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":900,"y":520,"wires":[["dbd91f10.9f051","7ac12723.d8a128"]]},{"id":"b4ba9bc0.7309f8","type":"inject","z":"8edb00cf.573f4","name":"setAllowsAvg","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":120,"y":440,"wires":[["1e8ffa17.4079c6","50369ff4.b71fd","55d8d437.6d545c"]]},{"id":"1e8ffa17.4079c6","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowLoadAvg","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":520,"wires":[[]]},{"id":"50369ff4.b71fd","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowPVAvg","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":580,"wires":[[]]},{"id":"55d8d437.6d545c","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowBatteryAvg","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":190,"y":620,"wires":[[]]},{"id":"15aa2621.7333da","type":"link in","z":"8edb00cf.573f4","name":"","links":["42ce5158.6e97d"],"x":155,"y":200,"wires":[["b04765e0.bb2828"]]},{"id":"b04765e0.bb2828","type":"switch","z":"8edb00cf.573f4","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"Inverter/GridWatts","vt":"str"},{"t":"eq","v":"Inverter/LoadWatts","vt":"str"},{"t":"eq","v":"Inverter/PvWattsTotal","vt":"str"},{"t":"eq","v":"Pylontech/Watts","vt":"str"}],"checkall":"true","repair":false,"outputs":4,"x":290,"y":160,"wires":[["9cf59cac.70e71","5c94e3f3.9750ec"],["896d919c.f8f59"],["112a08af.931377"],["dfdf1d94.ae557"]],"outputLabels":["1.GridWatts","2.LoadWatts","3.PvWattsTotal","4.BatteryWatts"]},{"id":"5c94e3f3.9750ec","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowLoadAvg","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":80,"wires":[[]]},{"id":"fc3bb221.d448e","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowPVAvg","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1040,"y":180,"wires":[["c9d82640.98a718"]]},{"id":"7840a9b2.670f68","type":"change","z":"8edb00cf.573f4","name":"","rules":[{"t":"set","p":"allowBatteryAvg","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1030,"y":260,"wires":[[]]},{"id":"93284a2f.12fee8","type":"batch","z":"f05f4cce.21f31","name":"PVWattsTotal-Chg","mode":"interval","count":10,"overlap":0,"interval":"${time}","allowEmptySequence":false,"topics":[],"x":190,"y":340,"wires":[["fa60cddf.a55d2"]]},{"id":"7ac12723.d8a128","type":"debug","z":"8edb00cf.573f4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1470,"y":660,"wires":[]},{"id":"c9d82640.98a718","type":"debug","z":"8edb00cf.573f4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"$flowContext(\"allowBatteryAvg\")","targetType":"jsonata","x":1460,"y":600,"wires":[]},{"id":"4105e5e4.f8748c","type":"switch","z":"8edb00cf.573f4","name":"allowPVAvg","property":"allowPVAvg","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":890,"y":580,"wires":[["dbd91f10.9f051","7ac12723.d8a128"]]},{"id":"2ffc0f4f.13151","type":"switch","z":"8edb00cf.573f4","name":"allowBatteryAvg","property":"allowBatteryAvg","propertyType":"flow","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":640,"wires":[["7ac12723.d8a128","dbd91f10.9f051"]]},{"id":"f7c9ec3.fb0991","type":"link in","z":"198d2e9b.8bf1d1","name":"","links":["42ce5158.6e97d"],"x":175,"y":20,"wires":[["346c2a2a.a4eb96"]]},{"id":"346c2a2a.a4eb96","type":"switch","z":"198d2e9b.8bf1d1","name":"Inverter Status","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"Inverter/Name","vt":"str"},{"t":"eq","v":"Inverter/InverterMode","vt":"str"},{"t":"eq","v":"Inverter/GridKwUse","vt":"str"},{"t":"eq","v":"Inverter/BatteryKwUse","vt":"str"},{"t":"eq","v":"Inverter/SolarKwUse","vt":"str"},{"t":"eq","v":"Inverter/TotalKwUse","vt":"str"},{"t":"eq","v":"Inverter/MaxLoadDay","vt":"str"},{"t":"eq","v":"Inverter/MaxPvDay","vt":"str"},{"t":"eq","v":"Inverter/Solar_Efficiency","vt":"str"}],"checkall":"true","repair":false,"outputs":9,"x":140,"y":200,"wires":[["a1799f35.30f31","d9a72bac.2330a8"],["92fd7e10.3e05e","d9a72bac.2330a8"],["f008d787.2855d8","d9a72bac.2330a8"],["a0bcb5ec.018408"],["c3e909ff.f422f8"],["6043cf3b.547a1"],["352e701a.ed1b5"],["c8379f55.bbd79"],["f280de16.adf16"]],"outputLabels":["name","mode","","","","","","",""]},{"id":"d961f3d0.37177","type":"debug","z":"198d2e9b.8bf1d1","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":230,"y":920,"wires":[]},{"id":"de6f85aa.92f098","type":"template","z":"198d2e9b.8bf1d1","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<div style=\"display: grid;\">\n<div style=\"grid-column: 1 / 4;\">{{payload.Inverter/Name}}</div> \n<div style=\"grid-column: 2 / 3;\">{{payload.Inverter/InverterMode}}</div>\n<div>{{payload.Inverter/GridKwUse}}</div>\n</div>","output":"str","x":280,"y":780,"wires":[["d236c3f3.ddc12","d961f3d0.37177"]]},{"id":"d9a72bac.2330a8","type":"join","z":"198d2e9b.8bf1d1","name":"Stuff","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":180,"y":640,"wires":[["de6f85aa.92f098","d961f3d0.37177"]]},{"id":"7d0dd208.a33f4c","type":"ui_text","z":"33acc295.88bebe","group":"cad84a0a.717cb8","order":2,"width":3,"height":2,"name":"","label":"Voltage","format":"{{msg.payload}}","layout":"col-center","x":640,"y":60,"wires":[]},{"id":"3fceaabe.776166","type":"ui_text","z":"33acc295.88bebe","group":"cad84a0a.717cb8","order":3,"width":3,"height":2,"name":"","label":"Freq","format":"{{msg.payload}}","layout":"col-center","x":630,"y":100,"wires":[]},{"id":"5f301ac2.08a904","type":"ui_text","z":"33acc295.88bebe","group":"b7881ffb.72655","order":2,"width":2,"height":2,"name":"","label":"Voltage","format":"{{msg.payload}}","layout":"col-center","x":860,"y":180,"wires":[]},{"id":"975d1f70.a96ce","type":"ui_text","z":"33acc295.88bebe","group":"b7881ffb.72655","order":4,"width":2,"height":2,"name":"","label":"Freq","format":"{{msg.payload}}","layout":"col-center","x":850,"y":220,"wires":[]},{"id":"664fcf40.59cfc","type":"ui_text","z":"33acc295.88bebe","group":"bcae6984.3f5778","order":2,"width":3,"height":2,"name":"","label":"Volts","format":"{{msg.payload}}","layout":"col-center","x":630,"y":480,"wires":[]},{"id":"ca6d5185.d6061","type":"ui_text","z":"33acc295.88bebe","group":"bcae6984.3f5778","order":3,"width":3,"height":2,"name":"","label":"Amps","format":"{{msg.payload}}","layout":"col-center","x":630,"y":520,"wires":[]},{"id":"29b5e722.bac598","type":"ui_text","z":"33acc295.88bebe","group":"cd607b8c.beb018","order":3,"width":3,"height":1,"name":"","label":"Amps","format":"{{msg.payload}}","layout":"col-center","x":570,"y":680,"wires":[]},{"id":"9ea4c7f4.e6a7c8","type":"ui_text","z":"33acc295.88bebe","group":"cd607b8c.beb018","order":4,"width":3,"height":1,"name":"","label":"Watts","format":"{{msg.payload}}","layout":"col-center","x":570,"y":720,"wires":[]},{"id":"fd52e694.89e8e8","type":"ui_text","z":"33acc295.88bebe","group":"cd607b8c.beb018","order":5,"width":3,"height":1,"name":"","label":"Temp","format":"{{msg.payload}}","layout":"col-center","x":570,"y":800,"wires":[]},{"id":"10f5ec6.f18d614","type":"ui_text","z":"33acc295.88bebe","group":"cd607b8c.beb018","order":6,"width":3,"height":1,"name":"","label":"Cycles","format":"{{msg.payload}}","layout":"col-center","x":570,"y":760,"wires":[]},{"id":"a1799f35.30f31","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":1,"width":12,"height":1,"name":"","label":"Name","format":"{{msg.payload}}","layout":"col-center","x":430,"y":100,"wires":[]},{"id":"92fd7e10.3e05e","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":2,"width":12,"height":1,"name":"","label":"Mode","format":"{{msg.payload}}","layout":"col-center","x":430,"y":140,"wires":[]},{"id":"f008d787.2855d8","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":7,"width":2,"height":2,"name":"","label":"GridKw","format":"{{msg.payload}}","layout":"col-center","x":440,"y":200,"wires":[]},{"id":"c8379f55.bbd79","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":9,"width":2,"height":2,"name":"","label":"Max PV","format":"{{msg.payload}}","layout":"col-center","x":440,"y":400,"wires":[]},{"id":"352e701a.ed1b5","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":4,"width":5,"height":2,"name":"","label":"Inverter Max Load","format":"{{msg.payload}}","layout":"col-center","x":470,"y":360,"wires":[]},{"id":"6043cf3b.547a1","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":11,"width":3,"height":2,"name":"","label":"Total KW","format":"{{msg.payload}}","layout":"col-center","x":440,"y":320,"wires":[]},{"id":"a0bcb5ec.018408","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":10,"width":3,"height":2,"name":"","label":"Battery KW","format":"{{msg.payload}}","layout":"col-center","x":450,"y":240,"wires":[]},{"id":"c3e909ff.f422f8","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":8,"width":2,"height":2,"name":"","label":"Solar KW","format":"{{msg.payload}}","layout":"col-center","x":440,"y":280,"wires":[]},{"id":"f280de16.adf16","type":"ui_text","z":"198d2e9b.8bf1d1","group":"e76c6fdb.a4fb2","order":5,"width":4,"height":2,"name":"","label":"Solar Efficiency","format":"{{msg.payload}}","layout":"col-center","x":460,"y":440,"wires":[]},{"id":"ab57b574.aa03c8","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"cad84a0a.717cb8","order":1,"width":0,"height":0,"gtype":"gage","title":"Grid","label":"Watts","format":"{{value}}","min":0,"max":"5000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"1200","seg2":"2500","x":630,"y":20,"wires":[]},{"id":"17d8724b.b2a87e","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"b7881ffb.72655","order":1,"width":0,"height":0,"gtype":"gage","title":"Load","label":"Watts","format":"{{value}}","min":0,"max":"5000","colors":["#00b500","#e6e600","#ca3838"],"seg1":"1200","seg2":"2500","x":850,"y":140,"wires":[]},{"id":"6c2865a1.e3d14c","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"bcae6984.3f5778","order":1,"width":0,"height":0,"gtype":"gage","title":"PV","label":"Watts","format":"{{value}}","min":0,"max":"3500","colors":["#ca3838","#e6e600","#00b500"],"seg1":"800","seg2":"2000","x":630,"y":440,"wires":[]},{"id":"6ef2a34d.d0932c","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"b7881ffb.72655","order":3,"width":2,"height":2,"gtype":"gage","title":"Load %","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"33","seg2":"66","x":850,"y":260,"wires":[]},{"id":"f41432b0.79e02","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"cd607b8c.beb018","order":1,"width":3,"height":4,"gtype":"gage","title":"Volts","label":"V","format":"{{value}}","min":"45","max":"54","colors":["#ca3838","#e6e600","#00b500"],"seg1":"","seg2":"","x":570,"y":580,"wires":[]},{"id":"4d53b4e7.083dec","type":"ui_gauge","z":"33acc295.88bebe","name":"","group":"cd607b8c.beb018","order":2,"width":3,"height":4,"gtype":"gage","title":"SOC","label":"V","format":"{{value}}","min":"0","max":"100","colors":["#ca3838","#e6e600","#00b500"],"seg1":"","seg2":"","x":570,"y":620,"wires":[]},{"id":"12eee1de.53605e","type":"ui_chart","z":"33acc295.88bebe","name":"","group":"f93272e6.39d35","order":1,"width":0,"height":0,"label":"Graph","chartType":"line","legend":"true","xformat":"HH:mm","interpolate":"step","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"8600","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#d62728","#1f77b4","#2ca02c","#864fb7","#98df8a","#791718","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1410,"y":540,"wires":[[]]},{"id":"dbd91f10.9f051","type":"ui_chart","z":"8edb00cf.573f4","name":"","group":"103d389.66ab4c7","order":1,"width":0,"height":0,"label":"Daily chart one minute AVG","chartType":"line","legend":"true","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#d62728","#1873b2","#2ca02c","#6b3b97","#98df8a","#d29090","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1160,"y":440,"wires":[[]]},{"id":"d236c3f3.ddc12","type":"ui_template","z":"198d2e9b.8bf1d1","d":true,"group":"e76c6fdb.a4fb2","name":"","order":14,"width":6,"height":1,"format":"<div ng-bind-html=\"msg.payload\" \nstyle=\"background-color:red;\">\n    \n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":540,"y":780,"wires":[[]]},{"id":"61a34d9c.79b8d4","type":"prowl","z":"da04bb9e.d326a8","title":"ICC-OmeSola","priority":"2","url":"","name":"LoadHighNotification","x":540,"y":300,"wires":[]},{"id":"e23f4271.1d5c28","type":"debug","z":"da04bb9e.d326a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":160,"y":480,"wires":[]},{"id":"4018708d.4a004","type":"switch","z":"da04bb9e.d326a8","name":"","property":"topic","propertyType":"msg","rules":[{"t":"cont","v":"shellies","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":360,"wires":[["e23f4271.1d5c28"]]},{"id":"bcbe6215.a55588","type":"sunriseinput","z":"337572f2.76802e","name":"Sunset and sunrise","lat":"-33.798416","lon":"18.488383","start":"sunrise","end":"sunset","x":130,"y":320,"wires":[[],["4b7c5948.b6d5"]]},{"id":"44204a23.520f0c","type":"mqtt out","z":"337572f2.76802e","name":"","topic":"","qos":"","retain":"true","broker":"72ab2781.7acc48","x":810,"y":360,"wires":[]},{"id":"4b7c5948.b6d5","type":"switch","z":"337572f2.76802e","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":300,"wires":[["1fb2c2d0.8d7935"],["cd2e2446.6ad028"]]},{"id":"1fb2c2d0.8d7935","type":"change","z":"337572f2.76802e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"shellies/shelly1-7725A9/relay/0/command","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":260,"wires":[["44204a23.520f0c"]]},{"id":"cd2e2446.6ad028","type":"change","z":"337572f2.76802e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"shellies/shelly1-7725A9/relay/0/command","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":460,"wires":[["44204a23.520f0c"]]},{"id":"79176d4.6ab4114","type":"inject","z":"337572f2.76802e","d":true,"name":"sunset","topic":"sun","payload":"0","payloadType":"num","repeat":"30","crontab":"","once":true,"onceDelay":0.1,"x":140,"y":500,"wires":[["4b7c5948.b6d5"]]},{"id":"a03d2e7b.5c1338","type":"inject","z":"337572f2.76802e","d":true,"name":"sunrise","topic":"sun","payload":"1","payloadType":"num","repeat":"30","crontab":"","once":true,"onceDelay":"15","x":140,"y":540,"wires":[["4b7c5948.b6d5"]]}]